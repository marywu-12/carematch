---
layout: default
---
{% include calculate_relative_base.html %}
{% capture post_url %}{{ relativebase }}{{ page.url }}{% endcapture %}
{% assign post_url = post_url | replace: "//", "/" %}

<section class="hidden">
  <div class="post">
    <a class="post-list-title" href="{{ post_url }}">{{ page.title }}</a>
    {% include post_meta.html type="post-card-meta" %}
    <div class="post-excerpt">
      {{ page.content | markdownify | strip_newlines | truncatewords: 100 }}
      <a class="read-more" href="{{ post_url }}"> read more</a>
    </div>
  </div>
</section>

<div class="flex-container transparent">
  {% include header.html %}

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    {% include schema-meta.html %}

    <div class="page-image">
      <div class="cover-image" style="background: url('{{ relativebase }}assets/img/{{ page.img }}') center no-repeat; background-size: cover;"></div>
    </div>

    <div class="wrapper">
      <div class="page-content">

        <div class="header-page">
          <h1 class="page-title">{{ page.title }}</h1>

          {#-- Original meta (date, read time) --#}
          {% include post_meta.html type="post-page-meta" %}

          {#-- Row 1: share icon inline (options hidden until click) --#}
          <div class="post-topmeta">
            <div class="post-share-inline">
              {% include share-icons.html %}
            </div>
          </div>

          {#-- Row 2: Tags on their own line (bubble chips) --#}
          {% if page.tags %}
          <div class="post-tags-row">
            <span class="post-tags-label">Tags:</span>
            <ul class="post-tags-chips">
              {% for tag in page.tags %}
                <li><a href="{{ relativebase }}tags.html#{{ tag | slugify }}">{{ tag }}</a></li>
              {% endfor %}
            </ul>
          </div>
          {% endif %}

          {% if page.author %}
            <div class="post-author">By {{ page.author }}</div>
          {% endif %}
        </div>

        {%- comment -%} Optional: hide left sidebar on post pages
        {% include sidebar.html context="post" class="side" id="sidebar" %}
        {%- endcomment -%}

        {% if page.toc %}{% include sidebar-toc.html %}{% endif %}
        {% include github-button.html %}

        {{ page.content | markdownify }}

        {% include sidebar.html context="post" class="inline" id="post-end" %}
        <div class="separator"></div>
        {% include author-box.html %}
        {% include recent-post.html %}
        {% include newsletter.html %}
        {% include comments.html %}
      </div>
    </div> <!-- End Wrapper -->

    <!-- Share: click-to-open (uses the FIRST link from share-icons.html as trigger) -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {
      const cont = document.querySelector('.post-topmeta .post-share-inline');
      if (!cont) return;

      const links = Array.from(cont.querySelectorAll(':scope > a'));
      if (!links.length) return;

      // Use the first rendered share link (the share icon) as the trigger
      const trigger = links[0];
      trigger.classList.add('is-share-trigger');

      // Move the remaining links into an inline tray
      const tray = document.createElement('div');
      tray.className = 'share-tray';
      links.slice(1).forEach(a => tray.appendChild(a.cloneNode(true)));
      cont.appendChild(tray);

      // Toggle tray
      trigger.addEventListener('click', (e) => {
        e.preventDefault(); e.stopPropagation();
        cont.classList.toggle('open');
        trigger.setAttribute('aria-expanded', cont.classList.contains('open'));
        trigger.setAttribute('role', 'button');
      });

      // Keyboard support
      trigger.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); trigger.click(); }
      });

      // Click outside closes
      document.addEventListener('click', () => {
        cont.classList.remove('open');
        trigger.setAttribute('aria-expanded', 'false');
      });
    });
    </script>
  </article>

  {% include search.html %}
  {% include footer.html %}
</div>
