---
layout: default
---
{% include calculate_relative_base.html %}
{% capture post_url %}{{ relativebase }}{{ page.url }}{% endcapture %}
{% assign post_url = post_url | replace: "//", "/" %}

<section class="hidden">
  <div class="post">
    <a class="post-list-title" href="{{ post_url }}">{{ page.title }}</a>
    {% include post_meta.html type="post-card-meta" %}
    <div class="post-excerpt">
      {{ page.content | markdownify | strip_newlines | truncatewords: 100 }}
      <a class="read-more" href="{{ post_url }}"> read more</a>
    </div>
  </div>
</section>

<div class="flex-container transparent">
  {% include header.html %}

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    {% include schema-meta.html %}

    <div class="page-image">
      <div class="cover-image" style="background: url('{{ relativebase }}assets/img/{{ page.img }}') center no-repeat; background-size: cover;"></div>
    </div>

    <div class="wrapper">
      <div class="page-content">

        <div class="header-page">
          <h1 class="page-title">{{ page.title }}</h1>
        
          <!-- Row 1: date/read-time + share icon (right next to it) -->
          <div class="post-topmeta">
            {% include post_meta.html type="post-page-meta" %}
            <div class="post-share-inline">
              {% include share-icons.html %}
            </div>
          </div>
        
          <!-- Row 2: tags (chips) -->
          {% if page.tags %}
          <div class="post-tags-row">
            <span class="post-tags-label">Tags:</span>
            <ul class="post-tags-chips">
              {% for tag in page.tags %}
                <li><a href="{{ relativebase }}tags/#{{ tag | slugify }}">{{ tag }}</a></li>
              {% endfor %}
            </ul>
          </div>
          {% endif %}
        
          {% if page.author %}
            <div class="post-author">By {{ page.author }}</div>
          {% endif %}
        </div>

        {%- comment -%} Left rail hidden on posts {%- endcomment -%}
        {%- comment -%} {% include sidebar.html context="post" class="side" id="sidebar" %} {%- endcomment -%}

        {% if page.toc %}{% include sidebar-toc.html %}{% endif %}
        {% include github-button.html %}

        {{ page.content | markdownify }}

        {% include sidebar.html context="post" class="inline" id="post-end" %}
        <div class="separator"></div>
        {% include author-box.html %}
        {% include recent-post.html %}
        {% include newsletter.html %}
        {% include comments.html %}
      </div>
    </div> <!-- End Wrapper -->

    <!-- Share: click-to-open tray under existing icon -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {
      const cont = document.querySelector('.post-topmeta .post-share-inline');
      if (!cont) return;
    
      const links = Array.from(cont.querySelectorAll(':scope > a'));
      if (!links.length) return;
    
      // Find the share icon link (fa-share, fa-share-alt, fa-share-from-square, etc.)
      let trigger = links.find(a => {
        const i = a.querySelector('i');
        if (!i) return false;
        return i.classList.contains('fa-share') ||
               i.classList.contains('fa-share-alt') ||
               i.classList.contains('fa-share-from-square') ||
               i.classList.contains('fa-share-square');
      }) || links[0]; // fallback if include uses a different icon
    
      trigger.classList.add('is-share-trigger');
    
      // Put the rest of the links into a tray
      const rest = links.filter(a => a !== trigger);
      const tray = document.createElement('div');
      tray.className = 'share-tray';
      rest.forEach(a => tray.appendChild(a.cloneNode(true)));
      cont.appendChild(tray);
    
      // Toggle tray on trigger click
      trigger.addEventListener('click', (e) => {
        e.preventDefault(); e.stopPropagation();
        cont.classList.toggle('open');
        trigger.setAttribute('aria-expanded', cont.classList.contains('open'));
        trigger.setAttribute('role', 'button');
      });
    
      // Keyboard support
      trigger.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); trigger.click(); }
      });
    
      // Close on outside click
      document.addEventListener('click', () => {
        cont.classList.remove('open');
        trigger.setAttribute('aria-expanded', 'false');
      });
    });
    </script>



  </article>

  {% include search.html %}
  {% include footer.html %}
</div>

